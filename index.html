<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulador OAB 2ª Fase - Diagnóstico</title>
    <style>
        body { font-family: sans-serif; margin: 0; background-color: #f4f4f4; height: 100vh; display: flex; flex-direction: column; }
        header { background: #333; color: white; padding: 15px; display: flex; justify-content: space-between; }
        main { display: flex; flex: 1; overflow: hidden; padding: 10px; gap: 10px; }
        .sidebar { background: white; padding: 15px; width: 250px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .content { flex: 1; background: white; padding: 15px; border-radius: 8px; display: flex; flex-direction: column; }
        #gabarito-container { flex: 1; border: 2px solid #ddd; position: relative; }
        iframe { width: 100%; height: 100%; border: none; }
        button { width: 100%; padding: 10px; background: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer; margin-bottom: 10px; }
        .debug-link { margin-bottom: 10px; color: #d9534f; font-weight: bold; }
    </style>
</head>
<body>

<header>
    <span>⚖️ Simulador OAB</span>
    <div id="timer">05:00:00</div>
</header>

<main>
    <nav class="sidebar">
        <h3>Peças</h3>
        <button onclick="carregar('ro35.pdf', 'Recurso Ordinário XXXV')">Abrir RO XXXV</button>
    </nav>

    <section class="content">
        <h2 id="titulo">Selecione uma peça</h2>
        <div id="debug-area" class="debug-link"></div>
        <div id="gabarito-container">
            <iframe id="viewer" src=""></iframe>
        </div>
    </section>
</main>

<script>
    function carregar(arquivo, nome) {
        const viewer = document.getElementById('viewer');
        const titulo = document.getElementById('titulo');
        const debug = document.getElementById('debug-area');
        
        // Caminho absoluto baseado na sua URL atual para evitar erros de pasta
        const urlBase = window.location.href.substring(0, window.location.href.lastIndexOf('/') + 1);
        const urlFinal = urlBase + arquivo;

        titulo.innerText = nome;
        viewer.src = urlFinal;

        // Cria um link de teste para diagnóstico
        debug.innerHTML = `Link direto do arquivo: <a href="${urlFinal}" target="_blank">${arquivo}</a><br>
                           <small>(Se clicar no link acima e der 404, o arquivo não foi enviado corretamente ao GitHub)</small>`;
        
        console.log("Caminho gerado:", urlFinal);
    }

    function startTimer(duration, display) {
        let timer = duration;
        setInterval(() => {
            let h = Math.floor(timer / 3600);
            let m = Math.floor((timer % 3600) / 60);
            let s = timer % 60;
            display.textContent = `${h.toString().padStart(2,'0')}:${m.toString().padStart(2,'0')}:${s.toString().padStart(2,'0')}`;
            if (--timer < 0) timer = 0;
        }, 1000);
    }
    window.onload = () => startTimer(18000, document.getElementById('timer'));
</script>

</body>
</html>
