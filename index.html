<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>INDEX PRINCIPAL - EDITOR ELITE V13</title>
    <style>
        :root { --bg: #0a0c10; --card: #161b22; --border: #30363d; --text: #c9d1d9; --gold: #d29922; --red: #ff7b72; }
        body { font-family: -apple-system, sans-serif; background: var(--bg); color: var(--text); margin: 0; padding: 0; display: flex; flex-direction: column; height: 100vh; }
        header { padding: 15px; border-bottom: 2px solid var(--gold); display: flex; gap: 12px; align-items: center; background: #000; position: sticky; top: 0; z-index: 1000; }
        select { flex: 1; background: #0d1117; color: var(--gold); border: 1px solid var(--gold); padding: 12px; border-radius: 8px; font-weight: 900; text-transform: uppercase; }
        .btn-acao { background: var(--gold); border: none; padding: 10px 18px; border-radius: 8px; cursor: pointer; font-size: 22px; }
        .area-escrita { flex: 1; overflow-y: auto; background: #cbd5e1; padding: 20px 10px; }
        .folha-branca { background: white; max-width: 850px; margin: 0 auto; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        .linha-fgv { display: flex; min-height: 32px; border-bottom: 1px solid #e2e8f0; }
        .numero-linha { width: 45px; border-right: 2px solid #000; background: #f1f5f9; display: flex; align-items: center; justify-content: center; font-size: 11px; color: #000; font-weight: 900; }
        .input-texto { flex: 1; padding: 0 15px; font-family: 'Courier New', monospace; font-size: 19px; color: #000; line-height: 32px; outline: none; text-transform: uppercase; font-weight: 700; }
        #painel-consulta { position: fixed; right: -100%; top: 0; width: 85%; height: 100%; background: var(--bg); z-index: 2000; transition: 0.4s; border-left: 3px solid var(--gold); overflow-y: auto; padding: 20px; }
        .btn-mentoria { position: fixed; right: 25px; bottom: 40px; width: 65px; height: 65px; border-radius: 50%; background: var(--gold); color: #000; border: 4px solid #000; font-size: 30px; z-index: 1500; cursor: pointer; display: flex; align-items: center; justify-content: center; }
    </style>
</head>
<body>

<header>
    <select id="radar-exame">
        <option value="0">--- SELECIONE O EXAME ---</option>
        <option value="44">EXAME 44 (RO)</option>
        <option value="43">EXAME 43 (CONTESTA√á√ÉO)</option>
        <option value="42">EXAME 42 (CONSIGNA√á√ÉO)</option>
        <option value="41">EXAME 41 (RO)</option>
        <option value="40">EXAME 40 (CONTESTA√á√ÉO)</option>
        <option value="39">EXAME 39 (RT)</option>
        <option value="38">EXAME 38 (RO)</option>
    </select>
    <button class="btn-acao" onclick="salvarPecaV13()">üíæ</button>
</header>

<div class="area-escrita">
    <div class="folha-branca" id="folha-dinamica"></div>
</div>

<button class="btn-mentoria" onclick="abrirMentoria()">üéì</button>

<div id="painel-consulta">
    <button onclick="abrirMentoria()" style="width:100%; padding:15px; background:var(--red); color:white; border:none; font-weight:900; border-radius:8px;">FECHAR CONSULTA</button>
    <div id="espaco-inteligencia"></div>
</div>

<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
    import { getDatabase, ref, push, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-database.js";
    import { QuestoesOAB } from './questoes.js';
    import { InteligenciaNC } from './NC.js';
    import { BancoTeses } from './teses.js';

    const config = {
        apiKey: "AIzaSyAmigODFK8R9c0-fWtagdxLWu9xkODfKYQ",
        authDomain: "masteroab-db5e1.firebaseapp.com",
        projectId: "masteroab-db5e1",
        databaseURL: "https://masteroab-db5e1-default-rtdb.firebaseio.com"
    };
    const app = initializeApp(config);
    const db = getDatabase(app);

    const RadarIdent = { "30":"RO", "31":"Contesta√ß√£o", "32":"RT", "33":"RO", "34":"Contesta√ß√£o", "35":"RO", "36":"RT", "37":"Contesta√ß√£o", "38":"RO", "39":"RT", "40":"Contesta√ß√£o", "41":"RO", "42":"Consigna√ß√£o", "43":"Contesta√ß√£o", "44":"RO" };

    const folha = document.getElementById('folha-dinamica');
    for(let i=1; i<=150; i++) {
        folha.innerHTML += `<div class="linha-fgv"><div class="numero-linha">${i}</div><div class="input-texto" contenteditable="true"></div></div>`;
    }

    window.salvarPecaV13 = async () => {
        const ex = document.getElementById('radar-exame').value;
        if(ex === "0") return alert("Selecione o Exame!");
        const texto = [];
        document.querySelectorAll('.input-texto').forEach(l => texto.push(l.innerText));
        await push(ref(db, 'producao_v13'), {
            nome_peca: RadarIdent[ex] || "PE√áA",
            activeEx: ex,
            linhas: texto,
            timestamp: serverTimestamp()
        });
        alert("‚úÖ SALVO NO HIST√ìRICO!");
    };

    window.abrirMentoria = () => {
        const p = document.getElementById('painel-consulta');
        if(p.style.right === '0px') { p.style.right = '-100%'; return; }
        p.style.right = '0px';
        const cont = document.getElementById('espaco-inteligencia');
        cont.innerHTML = "<h3>‚ö†Ô∏è N√ÉO CONFUNDA</h3>";
        InteligenciaNC.forEach(n => cont.innerHTML += `<div style="background:var(--card); padding:10px; margin-bottom:5px; border-left:4px solid var(--red)"><b>${n.t}</b><br>${n.c}</div>`);
        cont.innerHTML += "<h3>‚öñÔ∏è TESES</h3>";
        BancoTeses.forEach(t => cont.innerHTML += `<div style="background:var(--card); padding:10px; margin-bottom:5px; border-left:4px solid var(--gold)"><b>${t.t}</b><br>${t.c}</div>`);
    };
</script>
</body>
</html> 
